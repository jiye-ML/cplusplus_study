二十四 异常(Exception)
1 程序开发中常见的错误
1）语法错误
2）逻辑错误
3）功能错误
4）设计缺陷
5）需求不符
6）环境异常
7）操作不当

2 传统C中错误处理机制
1）通过返回值表示错误
优点：保证函数调用路径中的栈对象得到正确析构，不会内存泄漏.
缺点：错处处理流程复杂，需要逐层判断，代码臃肿

2）通过远程跳转处理错误
优点：不需要逐层判断返回值，实现一步到位的错误处理，代码精炼
缺点：函数调用路径中的栈对象失去被析构的机会，可能会形成内存泄漏

3 C++异常机制
	结合两种传统错误处理的优点，同时避免它们的缺点，在语法形式上实现一步到位的错误处理，同时保证栈对象得到正确的析构。
	
4 异常语法
1）异常抛出
	throw 异常对象;
2）异常检测和捕获
	try{
		可能发生异常语句;
	}
	catch(异常类型1){
		针对异常类型1处理..
	}
	catch(异常类型2){
		针对异常类型2处理..
	}
	...
	catch(...){
		针对其它异常处理..
	}
	注：catch子句根据异常对象类型顺序匹配，而不是最优配置；因此对于子类类型的异常捕获要写在前面，否则将被基类类型的异常捕获语句提前截获。
	
5 函数的异常说明
1）基本概念：用于说明某个函数可能抛出的异常类型
2）语法
	返回类型 函数名(形参表)throw(异常类型表){函数体}
	注：函数的异常说明是一种承诺，表示所抛出的异常类型不会超出说明的范围；但如果抛出异常说明以外的类型，该异常无法被正常捕获，而会被系统检测到，导致进程结束
3）两种极端形式
--》不写异常说明，表示可以抛出任何类型的异常.
--》空异常说明，"throw()",表示不会抛出任何异常.
4）如果函数的声明和定义分开写，要保证异常说明一致，但是顺序无所谓.

//补充函数重写的语法要求
5）如果基类中的虚函数带有异常说明，那么该函数在子类中的覆盖版本不能说明抛出更多的异常，否则将会因为"放松throw限定"导致编译失败.

6 标准异常类（exception）
  class exception{
  public:
    exception() throw() { } 
    virtual ~exception() throw();

    /**Returns a C-style character string describing
      the general cause of the current error.*/
    virtual const char* what() const throw();
  };

7 构造函数和析构函数中的异常
1）构造可以抛出异常，但是对象将被不完整构造，这样的对象析构函数不再会自动被执行，因此在构造函数抛出异常之前，需要手动清理之前所分配的动态资源。
2）析构函数不要抛出异常